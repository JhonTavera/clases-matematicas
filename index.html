<!doctype html>
<html lang="es">
<head>
  <!-- [1] Metadatos generales + anti-caché del HTML base -->
  <meta name="google-site-verification" content="BLKs_-ciNXuEIIuRlkfnAwS2pvIhlNUR5qeVY9FW7Oc" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clases de Matemáticas</title>
  <!-- Anti-caché (solo del HTML): -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- [2] Estilos globales (ajusta colores/espaciados aquí) -->
  <style>
    :root { --maxw: 980px; --line:#e8e9ef; --ink:#111; --muted:#555; --accent:#0b63c5; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; color: var(--ink); background: #fff; }
    header { padding: 1.25rem 1rem 0; background: #f6f7fb; border-bottom: 1px solid var(--line); }
    .container { max-width: var(--maxw); margin: 0 auto; padding: 1rem; }

    /* [2a] Frases motivadoras */
    .quoteWrap { text-align: center; padding: .5rem 1rem 0; }
    .quoteWrap em { display: block; font-style: italic; font-size: clamp(1rem, 2.4vw, 1.25rem); }
    .quoteWrap .author { color: var(--muted); margin-top: .3rem; }

    /* [2b] Barra superior con el botón para cambiar clave */
    .toolbar { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: .75rem; padding: .5rem 0 1rem; }
    .btn { padding: .6rem .8rem; border: 1px solid #d7d8e0; border-radius: .6rem; background:#fff; cursor:pointer; }
    .btn:hover { background:#fff; box-shadow: 0 1px 0 rgba(0,0,0,.04); }
    @media (max-width:700px) { .toolbar { grid-template-columns: 1fr; } }

    /* [2c] Tarjetas de cursos/secciones */
    .course { border: 1px solid var(--line); border-radius: .9rem; padding: 1rem; margin: 1rem 0; background: #fff; }
    .course h2 { margin: 0 0 .5rem; font-size: 1.2rem; }
    .details { border: 1px solid #ececf3; border-radius: .6rem; padding: .6rem .8rem; background: #fcfcff; margin: .5rem 0; }
    details > summary { cursor: pointer; font-weight: 600; color: #0b63c5; }
    .list { display: grid; gap: .5rem; }
    .pdf { display: flex; align-items: center; justify-content: space-between; padding: .65rem .8rem; border: 1px solid #ececf3; border-radius: .6rem; }
    .pdf a { text-decoration: none; color: #0b63c5; word-break: break-word; }
    .badge { font-size: .75rem; padding: .2rem .5rem; border-radius: .5rem; background: #eef6ff; color: #0b63c5; }

    footer { text-align: center; font-size: .85rem; color: #555; padding: 2rem 1rem; }

    /* [2d] Puerta de acceso (overlay) */
    .gate { position: fixed; inset: 0; z-index: 9999; background: rgba(255,255,255,0.96); display: none; align-items: center; justify-content: center; }
    .gate.show { display: flex; }
    .gate .panel { width: min(420px, 92vw); background: #fff; border: 1px solid var(--line); border-radius: .9rem; padding: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,.06); }
    .gate h2 { margin: 0 0 .25rem; font-size: 1.2rem; }
    .gate p { margin: .2rem 0 .8rem; color: var(--muted); }
    .gate input { width: 100%; padding: .75rem .85rem; border: 1px solid #d7d8e0; border-radius: .6rem; }
    .gate .row { display: grid; grid-template-columns: 1fr auto; gap: .6rem; margin-top: .8rem; }
    .gate button { padding: .75rem 1rem; border: 1px solid #0b63c5; background: #0b63c5; color: #fff; border-radius: .6rem; cursor: pointer; }
    .gate .err { color: #b00020; font-size: .9rem; margin-top: .5rem; min-height: 1.2em; }
  </style>

  <!-- [3] MathJax (para LaTeX si lo necesitas en los módulos) -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['\\(','\\)'], ['$', '$']], displayMath: [['\\[','\\]'], ['$$','$$']], processEscapes: true },
      svg: { fontCache: 'global' }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
</head>
<body>
  <!-- [4] Zona superior: frase motivadora y botón para cambiar clave -->
  <header>
    <div class="container">
      <div class="quoteWrap">
        <em id="quoteText">“…”</em>
        <div class="author" id="quoteAuthor">—</div>
      </div>
      <div class="toolbar">
        <span></span>
        <button id="changeKey" class="btn" type="button">Cambiar clave</button>
      </div>
    </div>
  </header>

  <!-- [5] Contenido -->
  <main class="container">
    <div id="root"></div>
  </main>

  <!-- [6] Pie -->
  <footer>
    © <span id="year"></span> • Universidad del Tolima.
  </footer>

  <!-- [7] Puerta de acceso (pide la clave) -->
  <div id="gate" class="gate" aria-hidden="true">
    <div class="panel">
      <h2>Ingresa la clave del curso</h2>
      <div class="row">
        <input id="gateInput" placeholder="Clave de curso" autocomplete="off" />
        <button id="gateBtn" type="button">Entrar</button>
      </div>
      <div class="err" id="gateErr"></div>
    </div>
  </div>

  <!-- [8] App JS -->
  <script>
  // [8.1] Versionado automático para romper caché de PDFs/HTML enlazados
  const SITE_VERSION = new Date(document.lastModified).getTime().toString(36);

  // [8.2] Mapeo de claves -> nombre exacto del curso en DATA
  const CODES = {
    "precalculo": "Precálculo",
    "teoriadenumeros": "Teoría de números",
    "geometriavectorial": "Geometría Vectorial",
    "edo":"Ecuaciones Diferenciales Ordinarias"
  };

  // [8.3] Frases motivadoras (puedes editar o añadir más)
  const QUOTES = [
    { text: "Somos lo que hacemos repetidamente. La excelencia, entonces, no es un acto, sino un hábito.", author: "Aristóteles" },
    { text: "Aprender sin reflexionar es malgastar la energía. Reflexionar sin aprender es peligroso.", author: "Confucio" },
    { text: "Las neuronas que se activan juntas, se conectan juntas.", author: "Donald Hebb" },
    { text: "Un hombre que ha cometido un error y no lo corrige, comete otro error.", author: "Confucio" },
    { text: "Caer siete veces y levantarse ocho.", author: "Proverbio chino" },
    { text: "Para resolver un problema, hay que aprender a plantearlo.", author: "George Pólya" },
    { text: "Las matemáticas son la reina de las ciencias.", author: "Carl Friedrich Gauss" }
  ];
  // [8.3a] Intervalo de rotación (por defecto 1 minuto). **Para cambiar a diario** pon 86400000.
  const ROTATE_MS = 86400000;  // <-- cambia a 86_400_000 para “una por día”
  function updateQuote() {
    const i = Math.floor(Date.now() / ROTATE_MS) % QUOTES.length;
    const q = QUOTES[i];
    document.getElementById("quoteText").textContent = `“${q.text}”`;
    document.getElementById("quoteAuthor").textContent = `— ${q.author}`;
  }
  setInterval(updateQuote, ROTATE_MS);
  updateQuote();

  // [8.4] DATA: cursos y recursos (edita rutas/títulos aquí)
  const DATA = {
    "Precálculo": {
      sections: {
        "Clases": [
          { titulo: "Clase 1", archivo: "cursos/precalculo/clase1.pdf" },
          { titulo: "Clase 2", archivo: "cursos/precalculo/clase2.pdf" },
          { titulo: "Clase 3", archivo: "cursos/precalculo/clase3.pdf" }
        ],
        "Ejercicios": [
          { titulo: "Operaciones básicas y simplificación", archivo: "(QUITAR_ESTO)cursos/h2/modulo0.html" },
          { titulo: "simplificación y problemas", archivo: "cursos/precalculo/simplificacionyproblemas.pdf" }
          // Si lo mueves: "cursos/precalculo/ejercicios/modulo0.html"
        ]
      }
    },

    "Geometría Vectorial": {
      sections: {
        "Clases": [
          { titulo: "preambulo", archivo: "cursos/geometriavectorial/preambulo.pdf" },
          { titulo: "suma y producto escalar", archivo: "cursos/geometriavectorial/suma_producto_escalar_vectores.pdf" },
          { titulo: "Clase 3", archivo: "cursos/precalculo/clase3.pdf" }
        ],
        "Ejercicios": [
          { titulo: "Operaciones básicas y simplificación", archivo: "cursos/h2/modulo0.html" }
          // Si lo mueves: "cursos/precalculo/ejercicios/modulo0.html"
        ]
      }
    },

    "Ecuaciones Diferenciales Ordinarias": {
      sections: {
        "Clases": [
          { titulo: "definiciones_ejemplos", archivo: "cursos/Ecuaciones Diferenciales Ordinarias/definiciones_ejemplos.pdf" }
        ],
        "Ejercicios": [
          { titulo: "Ecuaciones de Primer Orden", archivo: "cursos/h2/FALTANTE.html" }
          // Si lo mueves: "cursos/precalculo/ejercicios/modulo0.html"
        ]
      }
    },

    "Teoría de números": {
      sections: {
        "Clases": [
          { titulo: "Motivación", archivo: "cursos/teoria de numeros/motivacion.pdf" },
          { titulo: "Principio de inducción", archivo: "cursos/teoria de numeros/Principio_induccion.pdf" }
        ],
        "Ejercicios": [
          { titulo: "Principio de Inducción Matemática", archivo: "cursos/teoria de numeros/PIM.pdf" }
        ]
      }
    }
  };

  // [8.5] Referencias al DOM
  const yearEl = document.getElementById("year");
  const root = document.getElementById("root");
  const gate = document.getElementById("gate");
  const gateInput = document.getElementById("gateInput");
  const gateBtn = document.getElementById("gateBtn");
  const gateErr = document.getElementById("gateErr");
  const changeKeyBtn = document.getElementById("changeKey");
  yearEl.textContent = new Date().getFullYear();

  // [8.6] Estado “curso permitido” (clave en sesión) + ?clave= en URL
  let ALLOWED = sessionStorage.getItem("allowedCourse") || null;
  const urlKey = new URL(location.href).searchParams.get("clave");
  if (urlKey && CODES[urlKey.toLowerCase()]) {
    ALLOWED = CODES[urlKey.toLowerCase()];
    sessionStorage.setItem("allowedCourse", ALLOWED);
  }

  // [8.7] Utilidades UI
  function badgeFor(file) {
    const ext = (file.split(".").pop() || "").toLowerCase();
    if (ext === "pdf") return "PDF";
    if (ext === "html" || ext === "htm") return "HTML";
    return "Recurso";
  }
  // Enlaces con cache-busting (?v=SITE_VERSION)
  function makeItemRow(item) {
    const row = document.createElement("div");
    row.className = "pdf";

    const link = document.createElement("a");
    const url = new URL(item.archivo, location.href);
    url.searchParams.set("v", SITE_VERSION);
    link.href = url.toString();
    link.target = "_blank";
    link.rel = "noopener";
    link.textContent = item.titulo;

    const badge = document.createElement("span");
    badge.className = "badge";
    badge.textContent = badgeFor(item.archivo);

    row.appendChild(link);
    row.appendChild(badge);
    return row;
  }

  // [8.8] Render del contenido (sin buscador ni selector)
  function render() {
    root.innerHTML = "";

    const entries = Object.entries(DATA)
      .filter(([curso]) => (!ALLOWED || curso === ALLOWED));

    if (entries.length === 0) {
      root.innerHTML = "<p>No hay cursos para mostrar.</p>";
      return;
    }

    for (const [curso, contenido] of entries) {
      const wrap = document.createElement("section");
      wrap.className = "course";

      const h2 = document.createElement("h2");
      h2.textContent = curso;
      wrap.appendChild(h2);

      if (Array.isArray(contenido)) {
        const list = document.createElement("div");
        list.className = "list";
        contenido.forEach(item => list.appendChild(makeItemRow(item)));
        wrap.appendChild(list);
        root.appendChild(wrap);
        continue;
      }

      if (contenido && contenido.sections && typeof contenido.sections === "object") {
        const secciones = Object.keys(contenido.sections);
        secciones.forEach((nombreSeccion, idx) => {
          const det = document.createElement("details");
          det.className = "details";
          if (idx === 0) det.open = true; // abre la primera sección

          const sum = document.createElement("summary");
          sum.textContent = nombreSeccion;
          det.appendChild(sum);

          const list = document.createElement("div");
          list.className = "list";
          (contenido.sections[nombreSeccion] || [])
            .forEach(item => list.appendChild(makeItemRow(item)));
          det.appendChild(list);

          wrap.appendChild(det);
        });

        root.appendChild(wrap);
      }
    }
  }

  // [8.9] Lógica de la puerta (clave)
  function openGate() {
    gate.classList.add("show");
    gate.setAttribute("aria-hidden", "false");
    gateInput.value = "";
    gateErr.textContent = "";
    setTimeout(() => gateInput.focus(), 0);
  }
  function closeGate() {
    gate.classList.remove("show");
    gate.setAttribute("aria-hidden", "true");
  }
  function submitGate() {
    const raw = (gateInput.value || "").trim().toLowerCase();
    const course = CODES[raw];
    if (!course) {
      gateErr.textContent = "Clave inválida. Prueba: precalculo o teoriadenumeros.";
      return;
    }
    ALLOWED = course;
    sessionStorage.setItem("allowedCourse", ALLOWED);
    closeGate();
    render();
  }
  gateBtn.addEventListener("click", submitGate);
  gateInput.addEventListener("keydown", e => { if (e.key === "Enter") submitGate(); });
  changeKeyBtn.addEventListener("click", () => {
    ALLOWED = null;
    sessionStorage.removeItem("allowedCourse");
    openGate();
  });

  // [8.10] Inicialización
  if (!ALLOWED) openGate();    // muestra la puerta si no hay clave
  render();                    // dibuja el contenido según la clave (o todos si quitas la puerta)
  </script>
</body>
</html>

</html>


